<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Trumpfspiel Chat</title>
</head>
<body>

<h2>Trumpfspiel Chat</h2>

<input id="msg" placeholder="Nachricht">
<button onclick="send()">Senden</button>

<ul id="chat"></ul>

<h3>Deine Karten</h3>
<div id="karten"></div>

<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<script>
const socket = io("https://trumpfgame.onrender.com");
let myColor = "black";

// Farbe vom Server zugewiesen bekommen
socket.on("yourColor", (color) => {
  myColor = color;
});

// Nachricht senden
function send() {
  const text = document.getElementById("msg").value;
  if(text.trim() === "") return;
  socket.emit("message", { text, color: myColor });
  document.getElementById("msg").value = "";
}

// Nachricht vom Server empfangen
socket.on("message", (data) => {
  const li = document.createElement("li");
  li.textContent = data.text;
  li.style.color = data.color;
  document.getElementById("chat").appendChild(li);
});

// Karten vom Server empfangen
socket.on("karten", (data) => {
  const container = document.getElementById("karten");
  container.innerHTML = ""; // alte Karten entfernen

  [data.karte1, data.karte2].forEach(k => {
    const div = document.createElement("div");
    div.style.border = "1px solid black";
    div.style.padding = "5px";
    div.style.margin = "5px";
    div.style.display = "inline-block";
    div.style.width = "200px";

    div.innerHTML = `
      <h4>${k.name}</h4>
      <img src="${k.bild}" width="180"><br>
      Leistung: ${k.leistung} PS<br>
      Hubraum: ${k.hubraum} ccm<br>
      Höchstgeschwindigkeit: ${k.hoechstgeschwindigkeit} km/h<br>
      Beschleunigung: ${k.beschleunigung} s 0-100 km/h<br>
      Gewicht: ${k.gewicht} kg<br>
      Drehmoment: ${k.drehmoment} Nm<br>
      Preis: ${k.preis} €
    `;

    container.appendChild(div);
  });
});
</script>

</body>
</html>
